{"name":"Reflection-utils","tagline":"A utility library to handle Java reflection with ease","body":"This library will make it easier to get and set internal fields in classes using java reflection. The library is optimized for conveniance and not for speed, so it works best with unit tests.\r\n\r\nMocking is great! Sometimes the easiest way to insert mocks are by Java reflection. Especially if you cannot use constructor arguments or setter methods.\r\n\r\n## Example ##\r\n```\r\n    @Test\r\n    public void storeMethodShouldSaveEntity() throws Exception {\r\n        // Setup entities\r\n        EntityHandler handler = new EntityHandlerImpl();        \r\n        StoreDao storeDao = mock(StoreDao.class);\r\n        \r\n        // Insert mock into handler\r\n        new ReflectionHelper(handler).setField(storeDao);\r\n        \r\n        // Perform method\r\n        handler.store();\r\n\r\n        // Verify save method\r\n        verify(storeDao).save();\r\n    }\r\n```\r\n\r\nThe ReflectionHelper will insert the mocked object into the handler\r\n  * You don't need to use complicated reflection code.\r\n  * You don't need to specify field name; if only one field fits then that field will be used.\r\n  * If the field cannot be found, then user friendly exceptions are sent.\r\n\r\n## Methods ##\r\n\r\nThe Reflection helper have 5 methods:\r\n\r\n**ABC abc = ReflectionHelper.instantiatePrivateConstructor(ABC.class)** will create a new instance of ABC by invoking a (private) constructor with no arguments. This method can be used for getting hard-to-reach coverage for utility classes.\r\n\r\n**new ReflectionHelper(abc).setField(value)** will insert the value into the instance abc. This method can be used to insert stubs or mocks into other classes. ReflectionHelper will determine which field that should be set by comparing class types or assignable types. Setting an interface type to a concrete class value is no problem.\r\n\r\n**new ReflectionHelper(abc).setField(\"name\", value)** will insert the value into the instance abc for a named field. This method can be used to insert setup parameters where there are multiple fields that have the same type.\r\n\r\n**ValueClass value = new ReflectionHelper(abc).getField(ValueClass.class)** will return the current value for the field of a specified class.\r\n\r\n**ValueClass value = (ValueClass) new ReflectionHelper(abc).getField(\"name\")** will return the current value for a named field.\r\n\r\n## Download ##\r\n\r\nMaven users can add this library with the following addition to their pom.xml file.\r\n\r\n```\r\n  ...\r\n\r\n  <dependencies>\r\n    ...\r\n    <dependency>\r\n      <groupId>com.google.code.reflection-utils</groupId>\r\n      <artifactId>reflection-utils</artifactId>\r\n      <version>0.0.1</version>\r\n      <scope>test</scope>\r\n    </dependency>\r\n  </dependencies>\r\n\r\n  ...\r\n```\r\n\r\n## Scope ##\r\n\r\nThe visibility scope of the fields are like this:\r\n\r\n  * Fields that are private, protected, package protected or public in the instance class can be set with the ReflectionHelper\r\n  * Fields that are protected, package protected or public in the superclasses of the instance class can be set with the ReflectionHelper\r\n  * Fields that are hidden (same name and type) by a subclass are not available to the ReflectionHelper\r\n  * Internal fields in classes from Sun are not available\r\n  * Final fields cannot be changed\r\n  * If two or more fields can be set by the same value, then the name of the field must be specified\r\n\r\n## Why ##\r\n\r\nThis framework was created for the following reasons:\r\n  * I don't like setting fields to package protected just because some unit tests have to change values\r\n  * I don't like extra setter-methods, that are only placed in the class just because some unit tests have to change values\r\n  * Spring is very nice, but maintaining large xml configurations for tests can be difficult\r\n  * I do like test coverage even if I am working with legacy code which cannot or must not be changed\r\n  * Setting and getting values by class type instead of name helps a lot when refactoring code\r\n  * This reflection code has been used by me since 2008 and it makes sense to gather it into a framework","google":"UA-60761130-1","note":"Don't delete this file! It's used internally to help with page regeneration."}